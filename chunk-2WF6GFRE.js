import{a as z,b as A,e as B,g as P,i as W,j as I}from"./chunk-ZPEA53GZ.js";import{a as O}from"./chunk-GR2HOQFX.js";import{$ as u,Ba as M,Fa as h,La as b,Na as n,Oa as i,Pa as f,Qa as w,Ra as x,Sa as l,Wa as o,Xa as U,Ya as _,Za as g,_ as c,_a as C,a as v,d as k,ob as y,pb as V,qb as T,ta as d,xa as S}from"./chunk-6W3H5QY7.js";var m=k(O());function N(p,a){if(p&1){let t=w();n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),n(5,"td"),o(6),i(),n(7,"td",8)(8,"button",9),x("click",function(){let e=c(t).$implicit,r=l();return u(r.editUser(e))}),f(9,"i",10),i(),n(10,"button",11),x("click",function(){let e=c(t).$implicit,r=l();return u(r.deleteUser(e.id))}),f(11,"i",12),i()()()}if(p&2){let t=a.$implicit;d(2),U(t.nombre),d(2),U(t.correo),d(2),U(t.tipoUsuario)}}function F(p,a){if(p&1){let t=w();n(0,"div",13)(1,"h3",2),o(2,"Editar Usuario"),i(),n(3,"div",14)(4,"label",15),o(5,"Nombre:"),i(),n(6,"input",16),C("ngModelChange",function(e){c(t);let r=l();return g(r.user.nombre,e)||(r.user.nombre=e),u(e)}),i()(),n(7,"div",14)(8,"label",15),o(9,"Email:"),i(),n(10,"input",17),C("ngModelChange",function(e){c(t);let r=l();return g(r.user.correo,e)||(r.user.correo=e),u(e)}),i()(),n(11,"div",14)(12,"label",15),o(13,"Contrase\xF1a:"),i(),n(14,"input",16),C("ngModelChange",function(e){c(t);let r=l();return g(r.user.password,e)||(r.user.password=e),u(e)}),i()(),n(15,"div",14)(16,"label",15),o(17,"Tipo de Usuario:"),i(),n(18,"input",18),C("ngModelChange",function(e){c(t);let r=l();return g(r.user.tipoUsuario,e)||(r.user.tipoUsuario=e),u(e)}),i()(),n(19,"div",19)(20,"button",20),x("click",function(){c(t);let e=l();return u(e.saveChanges())}),f(21,"i",21),o(22," Guardar "),i(),n(23,"button",22),x("click",function(){c(t);let e=l();return u(e.toggleEdit())}),f(24,"i",23),o(25," Cancelar "),i()()()}if(p&2){let t=l();d(6),_("ngModel",t.user.nombre),d(4),_("ngModel",t.user.correo),d(4),_("ngModel",t.user.password),d(4),_("ngModel",t.user.tipoUsuario)}}function L(p,a){if(p&1){let t=w();n(0,"div",13)(1,"h3",2),o(2,"Crear Nuevo Usuario"),i(),n(3,"div",14)(4,"label",15),o(5,"Nombre:"),i(),n(6,"input",16),C("ngModelChange",function(e){c(t);let r=l();return g(r.newUser.nombre,e)||(r.newUser.nombre=e),u(e)}),i()(),n(7,"div",14)(8,"label",15),o(9,"Email:"),i(),n(10,"input",17),C("ngModelChange",function(e){c(t);let r=l();return g(r.newUser.correo,e)||(r.newUser.correo=e),u(e)}),i()(),n(11,"div",14)(12,"label",15),o(13,"Contrase\xF1a:"),i(),n(14,"input",16),C("ngModelChange",function(e){c(t);let r=l();return g(r.newUser.password,e)||(r.newUser.password=e),u(e)}),i()(),n(15,"div",14)(16,"label",15),o(17,"Tipo de Usuario:"),i(),n(18,"input",18),C("ngModelChange",function(e){c(t);let r=l();return g(r.newUser.tipoUsuario,e)||(r.newUser.tipoUsuario=e),u(e)}),i()(),n(19,"div",19)(20,"button",20),x("click",function(){c(t);let e=l();return u(e.createUser())}),f(21,"i",24),o(22," Crear Usuario "),i(),n(23,"button",22),x("click",function(){c(t);let e=l();return u(e.toggleCreate())}),f(24,"i",23),o(25," Cancelar "),i()()()}if(p&2){let t=l();d(6),_("ngModel",t.newUser.nombre),d(4),_("ngModel",t.newUser.correo),d(4),_("ngModel",t.newUser.password),d(4),_("ngModel",t.newUser.tipoUsuario)}}var E=class p{constructor(a){this.apiService=a}users=[];user={nombre:"",correo:"",password:"",tipoUsuario:0};newUser={nombre:"",correo:"",password:"",tipoUsuario:0};isEditing=!1;isCreating=!1;ngOnInit(){this.loadUsers()}loadUsers(){this.apiService.getUsuarios().subscribe(a=>{this.users=a},a=>{m.default.fire({title:"Error",text:"No se pudo cargar los usuarios",icon:"error",confirmButtonText:"Intentar de nuevo"})})}editUser(a){this.user=v({},a),this.isEditing=!0}saveChanges(){if(this.user.id===void 0){m.default.fire({title:"Error",text:"No se encontr\xF3 el ID del usuario",icon:"error",confirmButtonText:"Aceptar"});return}m.default.fire({title:"\xBFGuardar cambios?",text:"\xBFEst\xE1s seguro de que deseas actualizar este usuario?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, guardar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&this.apiService.updateUsuarios(this.user.id,this.user).subscribe(()=>{m.default.fire({title:"\xA1\xC9xito!",text:"Usuario actualizado correctamente",icon:"success",timer:1500,showConfirmButton:!1}),this.isEditing=!1,this.loadUsers()},()=>{m.default.fire({title:"Error",text:"No se pudo actualizar el usuario",icon:"error",confirmButtonText:"Intentar de nuevo"})})})}deleteUser(a){a!==void 0&&m.default.fire({title:"\xBFEst\xE1s seguro?",text:"\xBFDeseas eliminar este usuario?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.isConfirmed&&this.apiService.deleteUsuarios(a).subscribe(()=>{m.default.fire({title:"\xA1Eliminado!",text:"El usuario ha sido eliminado correctamente",icon:"success",timer:1500,showConfirmButton:!1}),this.loadUsers()},()=>{m.default.fire({title:"Error",text:"No se pudo eliminar el usuario",icon:"error",confirmButtonText:"Intentar de nuevo"})})})}toggleEdit(){this.isEditing=!this.isEditing}toggleCreate(){this.isCreating=!this.isCreating,this.isCreating||(this.newUser={nombre:"",correo:"",password:"",tipoUsuario:0})}createUser(){let a={id:0,nombre:this.newUser.nombre,correo:this.newUser.correo,password:this.newUser.password,fechaCreacion:"",tipoUsuario:this.newUser.tipoUsuario,rolUsuario:""};if(console.log("Datos del nuevo usuario:",a),!a.nombre||!a.correo||!a.password||!a.tipoUsuario){m.default.fire({title:"Error",text:"Por favor, completa todos los campos.",icon:"error",confirmButtonText:"Aceptar"});return}this.apiService.createUsuarios(a).subscribe(t=>{console.log("Respuesta del servidor:",t),m.default.fire({title:"\xA1\xC9xito!",text:"Usuario creado correctamente",icon:"success",timer:1500,showConfirmButton:!1}),this.loadUsers(),this.toggleCreate()},t=>{console.error("Error al crear el usuario:",t),m.default.fire({title:"Error",text:"No se pudo crear el usuario",icon:"error",confirmButtonText:"Intentar de nuevo"})})}static \u0275fac=function(t){return new(t||p)(S(I))};static \u0275cmp=M({type:p,selectors:[["app-actualizar-usuario"]],decls:22,vars:3,consts:[[1,"container","mt-4"],[1,"card","shadow-lg","p-4"],[1,"text-center","mb-4"],["id","nuevoUsuario",1,"btn","btn-success","mb-3",3,"click"],[1,"bi","bi-plus-circle"],[1,"table","table-hover","table-striped"],[4,"ngFor","ngForOf"],["class","mt-4",4,"ngIf"],[1,"text-center"],["title","Editar",1,"btn","btn-warning","btn-sm","me-2",3,"click"],[1,"bi","bi-pencil-fill"],["title","Eliminar",1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-trash-fill"],[1,"mt-4"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","email",1,"form-control",3,"ngModelChange","ngModel"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-save"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-x"],[1,"bi","bi-check-circle"]],template:function(t,s){t&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),o(3,"Usuarios"),i(),n(4,"button",3),x("click",function(){return s.toggleCreate()}),f(5,"i",4),o(6," Crear Nuevo Usuario "),i(),n(7,"table",5)(8,"thead")(9,"tr")(10,"th"),o(11,"Nombre"),i(),n(12,"th"),o(13,"Email"),i(),n(14,"th"),o(15,"Tipo de Usuario"),i(),n(16,"th"),o(17,"Acciones"),i()()(),n(18,"tbody"),h(19,N,12,3,"tr",6),i()(),h(20,F,26,4,"div",7)(21,L,26,4,"div",7),i()()),t&2&&(d(19),b("ngForOf",s.users),d(),b("ngIf",s.isEditing),d(),b("ngIf",s.isCreating))},dependencies:[W,z,P,A,B,T,y,V],styles:[".table-bordered[_ngcontent-%COMP%]{border:1px solid #ddd}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.card[_ngcontent-%COMP%]{border-radius:10px}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #ddd}.btn[_ngcontent-%COMP%]:hover{opacity:.9}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem}.btn-warning[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{font-size:1.2rem}input.form-control[_ngcontent-%COMP%]{border-radius:5px}button[_ngcontent-%COMP%]:focus{outline:none!important}#nuevoUsuario[_ngcontent-%COMP%]{width:200px}"]})};export{E as default};
