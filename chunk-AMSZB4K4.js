import{c as w}from"./chunk-ILF3SPHT.js";import{a as b,b as v,c as y,d as I,e as M,f as _,h as x,i as N,j as E}from"./chunk-GKPV4Y2C.js";import{a as T}from"./chunk-GR2HOQFX.js";import{Ba as S,Na as o,Oa as r,Ra as C,Wa as s,Ya as c,Za as u,_a as d,d as F,qb as h,ta as m,xa as l}from"./chunk-6W3H5QY7.js";var a=F(T());var p=class g{constructor(t,i){this.apiService=t;this.router=i}username="";password="";ngOnInit(){sessionStorage.getItem("usuario")&&this.router.navigate(["/dashboard"])}login(){this.apiService.getUsuarios().subscribe(t=>{console.log("Usuarios obtenidos:",t);let i=t.find(e=>e.correo===this.username&&e.password===this.password);console.log("Usuario encontrado:",i),i?(sessionStorage.setItem("usuario",JSON.stringify(i)),a.default.fire({title:"\xA1\xC9xito!",text:"Inicio de sesi\xF3n exitoso",icon:"success",timer:1500,showConfirmButton:!1}).then(()=>{this.router.navigate(["/dashboard"])})):a.default.fire({title:"Error",text:"Usuario o contrase\xF1a incorrectos",icon:"error",confirmButtonText:"Intentar de nuevo"})},t=>{console.error("Error en la petici\xF3n:",t),a.default.fire({title:"Error",text:"No se pudo conectar con el servidor",icon:"error",confirmButtonText:"Cerrar"})})}static \u0275fac=function(i){return new(i||g)(l(E),l(w))};static \u0275cmp=S({type:g,selectors:[["app-inicio-sesion"]],decls:15,vars:2,consts:[[1,"container","d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","p-4","shadow-lg",2,"width","350px"],[1,"text-center","mb-4"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","text","name","username","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","w-100"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),s(3,"Iniciar Sesi\xF3n"),r(),o(4,"form",3),C("ngSubmit",function(){return e.login()}),o(5,"div",4)(6,"label",5),s(7,"Usuario:"),r(),o(8,"input",6),d("ngModelChange",function(n){return u(e.username,n)||(e.username=n),n}),r()(),o(9,"div",4)(10,"label",5),s(11,"Contrase\xF1a:"),r(),o(12,"input",7),d("ngModelChange",function(n){return u(e.password,n)||(e.password=n),n}),r()(),o(13,"button",8),s(14,"Iniciar Sesi\xF3n"),r()()()()),i&2&&(m(8),c("ngModel",e.username),m(4),c("ngModel",e.password))},dependencies:[N,_,b,v,y,x,M,I,h],encapsulation:2})};export{p as default};
